!function(){"use strict";var e,t={346:function(e,t,n){var a=window.wp.blocks,l=window.wp.element,o=window.wp.i18n,r=window.wp.blockEditor,i=window.wp.components,s=window.React,c=n.n(s);class u extends c().Component{constructor(e){super(e),this.state={tableTitle:"",tableData:{}}}render(){const e=this.props.tableTitle?this.props.tableTitle:this.state.tableTitle,t=this.props.tableData?this.props.tableData:this.state.tableData;return(0,l.createElement)("div",{className:"sm-api-table"},e?(0,l.createElement)("h2",null,e):"",t?.headers&&t?.rows?(0,l.createElement)("table",null,(0,l.createElement)("thead",null,(0,l.createElement)("tr",null,t.headers.map(((e,t)=>(0,l.createElement)("th",{key:t},e))))),(0,l.createElement)("tbody",null,Object.keys(t.rows).map(((e,n)=>(0,l.createElement)("tr",{key:n},Object.keys(t.rows[e]).map(((n,a)=>(0,l.createElement)("td",{key:a},t.rows[e][n])))))))):(0,l.createElement)("p",null,(0,o.__)("Loading...","sm-api-block")))}}var d=u,p=window.wp.apiFetch,m=n.n(p),b=window.wp.url,f=(e,t,n)=>{const a=t?{columns:t}:{},l=(0,b.addQueryArgs)(e,a);m()({path:l}).then((e=>{const t=e.data;n(t)}))},h=JSON.parse('{"u2":"sm-api-block/sm-api-block"}');(0,a.registerBlockType)(h.u2,{edit:function({attributes:e,setAttributes:t}){const n=smApiBlock.endpointURL;return(0,l.useEffect)((()=>{const a=e.activeColumns.length>0,l=a?e.activeColumns:null;f(n,l,(n=>{t({defaultColumns:n.data.headers,activeColumns:a?e.activeColumns:n.data.headers,tableTitle:n.title,dataTable:a?n.filtered_data:n.data,hasLoaded:!0})}))}),[n]),(0,l.createElement)("div",{...(0,r.useBlockProps)()},(0,l.createElement)(r.InspectorControls,null,(0,l.createElement)(i.Panel,null,(0,l.createElement)(i.PanelBody,{title:(0,o.__)("Column Settings","sm-api-block"),icon:"admin-plugins"},e.hasLoaded?e.defaultColumns.map((a=>{const o=e.activeColumns.includes(a);return(0,l.createElement)(i.ToggleControl,{__nextHasNoMarginBottom:!0,label:a,checked:o,onChange:()=>{(a=>{let l=e.activeColumns;e.activeColumns.includes(a)?l=l.filter((e=>e!==a)):l.push(a),l.sort(((t,n)=>e.defaultColumns.indexOf(t)-e.defaultColumns.indexOf(n))),f(n,l,(e=>{t({tableTitle:e.title,dataTable:e.filtered_data,hasLoaded:!0,activeColumns:l})}))})(a)}})})):(0,o.__)("Loading...","sm-api-block")))),e.hasLoaded?(0,l.createElement)(d,{tableTitle:e.tableTitle,tableData:e.dataTable}):(0,o.__)("Loading...","sm-api-block"))}})}},n={};function a(e){var l=n[e];if(void 0!==l)return l.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=function(t,n,l,o){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],l=e[u][1],o=e[u][2];for(var i=!0,s=0;s<n.length;s++)(!1&o||r>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(i=!1,o<r&&(r=o));if(i){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,l,o]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={399:0,89:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,o,r=n[0],i=n[1],s=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(s)var u=s(a)}for(t&&t(n);c<r.length;c++)o=r[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},n=self.webpackChunksm_api_block=self.webpackChunksm_api_block||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var l=a.O(void 0,[89],(function(){return a(346)}));l=a.O(l)}();